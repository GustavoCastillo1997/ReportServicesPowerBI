var qe5k6fz8g7ydw;(()=>{"use strict";var t={764:(t,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Visual=void 0;var e=function(){function t(t){var o=this;this.data=[];var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="center",e.style.justifyContent="center",this.button=document.createElement("button"),this.button.textContent="Gerar Relatório",this.button.disabled=!0,this.button.style.margin="10px 0",this.button.style.padding="6px 14px",this.button.style.fontSize="14px",this.button.onclick=function(){return o.sendRequest()},this.logDiv=document.createElement("div"),this.logDiv.style.width="90%",this.logDiv.style.height="150px",this.logDiv.style.overflowY="auto",this.logDiv.style.border="1px solid #ccc",this.logDiv.style.padding="8px",this.logDiv.style.fontSize="12px",this.logDiv.style.fontFamily="monospace",this.logDiv.style.backgroundColor="#f9f9f9",this.logDiv.style.whiteSpace="pre-wrap",this.logDiv.style.marginTop="10px",e.appendChild(this.button),e.appendChild(this.logDiv),t.element.appendChild(e)}return t.prototype.log=function(t){var o=(new Date).toLocaleTimeString();this.logDiv.textContent+="[".concat(o,"] ").concat(t,"\n"),this.logDiv.scrollTop=this.logDiv.scrollHeight},t.prototype.update=function(t){var o,e=null===(o=t.dataViews)||void 0===o?void 0:o[0];this.log("DataView recebido: ".concat(e?"sim":"não")),(null==e?void 0:e.table)?this.log("Tipo detectado: TABLE"):(null==e?void 0:e.categorical)?this.log("Tipo detectado: CATEGORICAL"):(null==e?void 0:e.matrix)?this.log("Tipo detectado: MATRIX"):this.log("Tipo de dataView desconhecido ou vazio");var i=null==e?void 0:e.table;if(!i||!i.rows||!i.columns)return this.log("Dados de tabela incompletos ou ausentes. Botão desabilitado."),void(this.button.disabled=!0);var a=i.columns.map(function(t){return t.displayName});this.data=i.rows.map(function(t){var o={};return t.forEach(function(t,e){o[a[e]]=t}),o}),this.log("Dados carregados: ".concat(this.data.length," linhas.")),this.button.disabled=0===this.data.length},t.prototype.sendRequest=function(){var t=this;console.log("Botão clicado, dados para envio:",this.data),fetch("https://c6b4-200-195-158-114.ngrok-free.app/api/proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filtros:this.data})}).then(function(o){o.ok?(alert("Enviado com sucesso!"),t.log("Requisição enviada com sucesso.")):(alert("Erro ao enviar: ".concat(o.status)),t.log("Erro ao enviar: ".concat(o.status)))}).catch(function(o){alert("Falha na requisição: "+o.message),t.log("Falha na requisição: ".concat(o.message))})},t}();o.Visual=e}},o={};function e(i){var a=o[i];if(void 0!==a)return a.exports;var s=o[i]={exports:{}};return t[i](s,s.exports,e),s.exports}var i={};(()=>{var t=i;Object.defineProperty(t,"__esModule",{value:!0});var o=e(764),a=window.powerbi,s={name:"qe5k6fz8g7ydw",displayName:"Botão Envia API",class:"Visual",apiVersion:"5.3.0",create:function(t){if(o.Visual)return new o.Visual(t);throw"Visual instance not found"},createModalDialog:function(t,o,e){var i=globalThis.dialogRegistry;t in i&&new i[t](o,e)},custom:!0};void 0!==a&&(a.visuals=a.visuals||{},a.visuals.plugins=a.visuals.plugins||{},a.visuals.plugins.qe5k6fz8g7ydw=s),t.default=s})(),qe5k6fz8g7ydw=i})();